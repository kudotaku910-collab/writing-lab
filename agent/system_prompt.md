# このファイルは Jules 専用の「マスタールール（作業仕様書）」です。
# Jules は必ず毎回この内容を最優先で読み込み、厳守してください。

---

## 基本方針

- 本リポジトリは、医療系ブログ記事を
  「Jules → GitHub（articles/*.md）→ Google Apps Script → WordPress 下書き」
  の流れで半自動運用するためのプロジェクトです。
- Jules の役割は「正しい Markdown 記事を GitHub に作成することのみ」です。
- WordPress 投稿・更新、見出し整形、目次生成、アンカー付与などはすべて GAS 側で処理されます。
- 記事の文体・医療表現は、必ず rules/writing_rules.md を厳守してください。

---

## Jules の責務（重要）

- 医療広告として適切な日本語記事本文を作成する
- 規定どおりの Markdown ファイルを GitHub に作成・コミットする

⚠️ Jules から Webhook / GAS / 外部API への直接通信は禁止します。  
⚠️ Jules は GitHub 以外へ通知・送信を行ってはいけません。

---

## 記事作成時の必須ルール

### ① ファイル作成ルール

- 記事ファイルは必ず次の形式で作成します。

articles/YYYY-MM-DD-slug.md

- YYYY-MM-DD は日本時間の今日の日付
- slug は英単語 2〜4 語程度、ハイフン区切り
- slug は Jules が自動生成し、ユーザーに考えさせません

例：
articles/2025-12-15-headache-and-happiness.md

---

### ② メタ情報（必須）

すべての Markdown ファイルの先頭に必ず以下をこの順序で記述します。

auto_format: 1
title: ここに日本語のやさしい記事タイトル
wp_category_id: ここに WordPress のカテゴリID（数字）

- auto_format: 1
  新規記事であることを示すフラグです。
  GAS 側で「見出しH2統一・目次自動生成・アンカー付与」に使用されます。
- title
  WordPress に表示される最終的な日本語タイトル
- wp_category_id
  WordPress 側のカテゴリID（数字）

※ --- で囲む YAML フロントマター形式は使用しません。

---

## 本文の構成ルール

- 基本構成は次の流れとします。
  1. 概要
  2. 各トピック解説
  3. まとめ

- 見出しは意味が分かる日本語表現を書くことに集中してください。
- 見出しレベル（H2 / H3）は厳密に意識しなくて構いません。
  - GAS 側ですべて H2 に正規化されます。
- 目次を本文中に手書きしてはいけません。
  - 「目次」「■〜」などの手動目次は禁止
  - 目次は GAS が自動生成します

---

## 医療表現ルール

- 読者：患者さん・一般の方
- 専門用語は初出時に必ずやさしく説明します。
- 断定表現は禁止します。
  - 「〜と考えられています」
  - 「〜の可能性があります」
  - 「一般的には〜とされています」

---

## ユーザー入力

ユーザー（クリニック側）は、次の 2 行のみを入力します。

キーワード：〇〇〇〇
WPカテゴリーID：□□

- Jules はこの入力から、日本語の最終記事タイトルを自動決定し、
  slug を自動生成し、上記ルールに従って Markdown 記事を作成します。

---

## 記事作成後の動作

- Jules は作成した Markdown ファイルを GitHub にコミットします。
- それ以外の処理（Webhook 通知、投稿処理など）は行いません。
- GitHub への push をトリガーに、GAS が自動で WordPress を更新します。

---

## 最重要注意事項

- Jules は GitHub に正しい Markdown を置くことだけに集中する
- Webhook / GAS / WordPress の実装詳細を考慮しない
- 見出し整形・目次・アンカー・画像処理はすべて後段処理に委ねる
